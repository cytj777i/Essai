-- 🔥 Roblox Lua 脚本合集 - 多功能集成
-- 作者: AI助手
-- 功能: 飞行、穿墙、ESP、自瞄、玩家信息等

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local HttpService = game:GetService("HttpService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- 🎨 创建主UI
local MainUI = Instance.new("ScreenGui")
MainUI.Name = "AllInOneScript"
MainUI.Parent = playerGui
MainUI.ResetOnSpawn = false

-- 🏗️ 主容器
local MainContainer = Instance.new("Frame")
MainContainer.Name = "MainContainer"
MainContainer.Size = UDim2.new(0, 350, 0, 400)
MainContainer.Position = UDim2.new(0.5, -175, 0.5, -200)
MainContainer.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
MainContainer.BorderSizePixel = 0
MainContainer.Parent = MainUI

-- 圆角
local ContainerCorner = Instance.new("UICorner")
ContainerCorner.CornerRadius = UDim.new(0, 12)
ContainerCorner.Parent = MainContainer

-- 阴影
local ContainerShadow = Instance.new("UIStroke")
ContainerShadow.Color = Color3.fromRGB(80, 80, 80)
ContainerShadow.Thickness = 2
ContainerShadow.Parent = MainContainer

-- 🎯 标题栏
local TitleBar = Instance.new("Frame")
TitleBar.Name = "TitleBar"
TitleBar.Size = UDim2.new(1, 0, 0, 35)
TitleBar.Position = UDim2.new(0, 0, 0, 0)
TitleBar.BackgroundColor3 = Color3.fromRGB(30, 144, 255)  -- 道奇蓝
TitleBar.BorderSizePixel = 0
TitleBar.Parent = MainContainer

-- 标题栏圆角
local TitleCorner = Instance.new("UICorner")
TitleCorner.CornerRadius = UDim.new(0, 12)
TitleCorner.Parent = TitleBar

-- 标题文字
local TitleText = Instance.new("TextLabel")
TitleText.Name = "TitleText"
TitleText.Size = UDim2.new(0.7, 0, 1, 0)
TitleText.Position = UDim2.new(0, 10, 0, 0)
TitleText.BackgroundTransparency = 1
TitleText.Text = "🎮 脚本合集 v2.0"
TitleText.TextColor3 = Color3.fromRGB(255, 255, 255)
TitleText.TextSize = 14
TitleText.Font = Enum.Font.GothamBold
TitleText.TextXAlignment = Enum.TextXAlignment.Left
TitleText.Parent = TitleBar

-- 控制按钮容器
local ControlButtons = Instance.new("Frame")
ControlButtons.Name = "ControlButtons"
ControlButtons.Size = UDim2.new(0, 80, 1, 0)
ControlButtons.Position = UDim2.new(1, -80, 0, 0)
ControlButtons.BackgroundTransparency = 1
ControlButtons.Parent = TitleBar

-- 最小化按钮
local MinimizeBtn = Instance.new("TextButton")
MinimizeBtn.Name = "MinimizeBtn"
MinimizeBtn.Size = UDim2.new(0, 20, 0, 20)
MinimizeBtn.Position = UDim2.new(0, 5, 0.5, -10)
MinimizeBtn.BackgroundColor3 = Color3.fromRGB(255, 193, 7)
MinimizeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
MinimizeBtn.Text = "_"
MinimizeBtn.TextSize = 12
MinimizeBtn.Font = Enum.Font.GothamBold
MinimizeBtn.Parent = ControlButtons

-- 关闭按钮
local CloseBtn = Instance.new("TextButton")
CloseBtn.Name = "CloseBtn"
CloseBtn.Size = UDim2.new(0, 20, 0, 20)
CloseBtn.Position = UDim2.new(0, 30, 0.5, -10)
CloseBtn.BackgroundColor3 = Color3.fromRGB(220, 53, 69)
CloseBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseBtn.Text = "X"
CloseBtn.TextSize = 12
CloseBtn.Font = Enum.Font.GothamBold
CloseBtn.Parent = ControlButtons

-- 设置按钮
local SettingsBtn = Instance.new("TextButton")
SettingsBtn.Name = "SettingsBtn"
SettingsBtn.Size = UDim2.new(0, 20, 0, 20)
SettingsBtn.Position = UDim2.new(0, 55, 0.5, -10)
SettingsBtn.BackgroundColor3 = Color3.fromRGB(108, 117, 125)
SettingsBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
SettingsBtn.Text = "⚙"
SettingsBtn.TextSize = 10
SettingsBtn.Font = Enum.Font.GothamBold
SettingsBtn.Parent = ControlButtons

-- 按钮圆角
for _, btn in pairs({MinimizeBtn, CloseBtn, SettingsBtn}) do
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 6)
    corner.Parent = btn
end

-- 📝 内容区域
local ContentArea = Instance.new("Frame")
ContentArea.Name = "ContentArea"
ContentArea.Size = UDim2.new(1, 0, 1, -35)
ContentArea.Position = UDim2.new(0, 0, 0, 35)
ContentArea.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
ContentArea.BorderSizePixel = 0
ContentArea.Parent = MainContainer

-- 内容圆角
local ContentCorner = Instance.new("UICorner")
ContentCorner.CornerRadius = UDim.new(0, 12)
ContentCorner.Parent = ContentArea

-- 📑 标签页容器
local TabContainer = Instance.new("Frame")
TabContainer.Name = "TabContainer"
TabContainer.Size = UDim2.new(1, 0, 0, 30)
TabContainer.Position = UDim2.new(0, 0, 0, 0)
TabContainer.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
TabContainer.BorderSizePixel = 0
TabContainer.Parent = ContentArea

-- 标签按钮容器
local TabButtons = Instance.new("Frame")
TabButtons.Name = "TabButtons"
TabButtons.Size = UDim2.new(1, -10, 1, 0)
TabButtons.Position = UDim2.new(0, 5, 0, 0)
TabButtons.BackgroundTransparency = 1
TabButtons.Parent = TabContainer

-- 页面容器
local PageContainer = Instance.new("Frame")
PageContainer.Name = "PageContainer"
PageContainer.Size = UDim2.new(1, -10, 1, -40)
PageContainer.Position = UDim2.new(0, 5, 0, 35)
PageContainer.BackgroundTransparency = 1
PageContainer.Parent = ContentArea

-- 🎯 创建标签页系统
local currentTab = "player"
local tabs = {}

-- 创建标签按钮函数
local function createTabButton(name, displayName, position)
    local tabBtn = Instance.new("TextButton")
    tabBtn.Name = name .. "Tab"
    tabBtn.Size = UDim2.new(0, 80, 1, -4)
    tabBtn.Position = position
    tabBtn.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
    tabBtn.TextColor3 = Color3.fromRGB(200, 200, 200)
    tabBtn.Text = displayName
    tabBtn.TextSize = 11
    tabBtn.Font = Enum.Font.Gotham
    tabBtn.Parent = TabButtons
    
    local tabCorner = Instance.new("UICorner")
    tabCorner.CornerRadius = UDim.new(0, 6)
    tabCorner.Parent = tabBtn
    
    -- 创建页面
    local tabPage = Instance.new("ScrollingFrame")
    tabPage.Name = name .. "Page"
    tabPage.Size = UDim2.new(1, 0, 1, 0)
    tabPage.Position = UDim2.new(0, 0, 0, 0)
    tabPage.BackgroundTransparency = 1
    tabPage.ScrollBarThickness = 4
    tabPage.Visible = false
    tabPage.Parent = PageContainer
    
    local uiListLayout = Instance.new("UIListLayout")
    uiListLayout.Padding = UDim.new(0, 5)
    uiListLayout.Parent = tabPage
    
    tabs[name] = {
        button = tabBtn,
        page = tabPage
    }
    
    -- 点击事件
    tabBtn.MouseButton1Click:Connect(function()
        -- 隐藏所有页面
        for tabName, tabData in pairs(tabs) do
            tabData.page.Visible = false
            tabData.button.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
        end
        
        -- 显示当前页面
        tabPage.Visible = true
        tabBtn.BackgroundColor3 = Color3.fromRGB(30, 144, 255)
        currentTab = name
    end)
    
    return tabPage
end

-- 创建标签页
local playerPage = createTabButton("player", "玩家功能", UDim2.new(0, 0, 0, 2))
local visualPage = createTabButton("visual", "视觉功能", UDim2.new(0, 82, 0, 2))
local movementPage = createTabButton("movement", "移动功能", UDim2.new(0, 164, 0, 2))
local otherPage = createTabButton("other", "其他功能", UDim2.new(0, 246, 0, 2))

-- 默认显示玩家页面
tabs.player.page.Visible = true
tabs.player.button.BackgroundColor3 = Color3.fromRGB(30, 144, 255)

-- 🛠️ 创建控件函数
local function createSection(parent, title)
    local section = Instance.new("Frame")
    section.Name = title .. "Section"
    section.Size = UDim2.new(1, 0, 0, 30)
    section.BackgroundColor3 = Color3.fromRGB(65, 65, 65)
    section.BorderSizePixel = 0
    section.Parent = parent
    
    local sectionCorner = Instance.new("UICorner")
    sectionCorner.CornerRadius = UDim.new(0, 6)
    sectionCorner.Parent = section
    
    local sectionLabel = Instance.new("TextLabel")
    sectionLabel.Name = "SectionLabel"
    sectionLabel.Size = UDim2.new(1, -10, 1, 0)
    sectionLabel.Position = UDim2.new(0, 5, 0, 0)
    sectionLabel.BackgroundTransparency = 1
    sectionLabel.Text = "📌 " .. title
    sectionLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    sectionLabel.TextSize = 12
    sectionLabel.Font = Enum.Font.GothamBold
    sectionLabel.TextXAlignment = Enum.TextXAlignment.Left
    sectionLabel.Parent = section
    
    return section
end

local function createButton(parent, text, callback)
    local button = Instance.new("TextButton")
    button.Name = text .. "Btn"
    button.Size = UDim2.new(1, 0, 0, 25)
    button.BackgroundColor3 = Color3.fromRGB(70, 130, 180)
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.Text = text
    button.TextSize = 12
    button.Font = Enum.Font.Gotham
    button.Parent = parent
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 6)
    buttonCorner.Parent = button
    
    button.MouseButton1Click:Connect(callback)
    
    -- 悬停效果
    button.MouseEnter:Connect(function()
        button.BackgroundColor3 = Color3.fromRGB(100, 149, 237)
    end)
    
    button.MouseLeave:Connect(function()
        button.BackgroundColor3 = Color3.fromRGB(70, 130, 180)
    end)
    
    return button
end

local function createToggle(parent, text, default, callback)
    local toggleFrame = Instance.new("Frame")
    toggleFrame.Name = text .. "Toggle"
    toggleFrame.Size = UDim2.new(1, 0, 0, 25)
    toggleFrame.BackgroundTransparency = 1
    toggleFrame.Parent = parent
    
    local toggleButton = Instance.new("TextButton")
    toggleButton.Name = "ToggleBtn"
    toggleButton.Size = UDim2.new(1, 0, 1, 0)
    toggleButton.BackgroundColor3 = default and Color3.fromRGB(86, 207, 225) or Color3.fromRGB(120, 120, 120)
    toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    toggleButton.Text = "● " .. text .. ": " .. (default and "开" or "关")
    toggleButton.TextSize = 12
    toggleButton.Font = Enum.Font.Gotham
    toggleButton.TextXAlignment = Enum.TextXAlignment.Left
    toggleButton.Parent = toggleFrame
    
    local toggleCorner = Instance.new("UICorner")
    toggleCorner.CornerRadius = UDim.new(0, 6)
    toggleCorner.Parent = toggleButton
    
    local isEnabled = default
    
    toggleButton.MouseButton1Click:Connect(function()
        isEnabled = not isEnabled
        toggleButton.BackgroundColor3 = isEnabled and Color3.fromRGB(86,207, 225) or Color3.fromRGB(120, 120, 120)
        toggleButton.Text = "● " .. text .. ": " .. (isEnabled and "开" or "关")
        callback(isEnabled)
    end)
    
    return {frame = toggleFrame, setState = function(state)
        isEnabled = state
        toggleButton.BackgroundColor3 = isEnabled and Color3.fromRGB(86, 207, 225) or Color3.fromRGB(120, 120, 120)
        toggleButton.Text = "● " .. text .. ": " .. (isEnabled and "开" or "关")
        callback(isEnabled)
    end}
end

local function createSlider(parent, text, min, max, default, callback)
    local sliderFrame = Instance.new("Frame")
    sliderFrame.Name = text .. "Slider"
    sliderFrame.Size = UDim2.new(1, 0, 0, 40)
    sliderFrame.BackgroundTransparency = 1
    sliderFrame.Parent = parent
    
    local sliderLabel = Instance.new("TextLabel")
    sliderLabel.Name = "SliderLabel"
    sliderLabel.Size = UDim2.new(1, 0, 0, 15)
    sliderLabel.Position = UDim2.new(0, 0, 0, 0)
    sliderLabel.BackgroundTransparency = 1
    sliderLabel.Text = text .. ": " .. default
    sliderLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    sliderLabel.TextSize = 11
    sliderLabel.Font = Enum.Font.Gotham
    sliderLabel.TextXAlignment = Enum.TextXAlignment.Left
    sliderLabel.Parent = sliderFrame
    
    local sliderBackground = Instance.new("Frame")
    sliderBackground.Name = "SliderBackground"
    sliderBackground.Size = UDim2.new(1, 0, 0, 10)
    sliderBackground.Position = UDim2.new(0, 0, 0, 20)
    sliderBackground.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
    sliderBackground.BorderSizePixel = 0
    sliderBackground.Parent = sliderFrame
    
    local bgCorner = Instance.new("UICorner")
    bgCorner.CornerRadius = UDim.new(0, 5)
    bgCorner.Parent = sliderBackground
    
    local sliderFill = Instance.new("Frame")
    sliderFill.Name = "SliderFill"
    sliderFill.Size = UDim2.new((default - min) / (max - min), 0, 1, 0)
    sliderFill.Position = UDim2.new(0, 0, 0, 0)
    sliderFill.BackgroundColor3 = Color3.fromRGB(86, 207, 225)
    sliderFill.BorderSizePixel = 0
    sliderFill.Parent = sliderBackground
    
    local fillCorner = Instance.new("UICorner")
    fillCorner.CornerRadius = UDim.new(0, 5)
    fillCorner.Parent = sliderFill
    
    local sliding = false
    
    sliderBackground.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            sliding = true
            updateSlider(input)
        end
    end)
    
    UserInputService.InputChanged:Connect(function(input)
        if sliding and input.UserInputType == Enum.UserInputType.MouseMovement then
            updateSlider(input)
        end
    end)
    
    UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            sliding = false
        end
    end)
    
    local function updateSlider(input)
        local xPos = input.Position.X - sliderBackground.AbsolutePosition.X
        local fillWidth = math.clamp(xPos, 0, sliderBackground.AbsoluteSize.X)
        local value = min + (fillWidth / sliderBackground.AbsoluteSize.X) * (max - min)
        value = math.floor(value)
        
        sliderFill.Size = UDim2.new((value - min) / (max - min), 0, 1, 0)
        sliderLabel.Text = text .. ": " .. value
        callback(value)
    end
    
    return sliderFrame
end

-- 🎮 玩家功能页面
local playerSection1 = createSection(playerPage, "基础属性")
createSlider(playerSection1, "移动速度", 16, 200, 16, function(value)
    local character = player.Character
    if character and character:FindFirstChildOfClass("Humanoid") then
        character:FindFirstChildOfClass("Humanoid").WalkSpeed = value
    end
end)

createSlider(playerSection1, "跳跃高度", 50, 200, 50, function(value)
    local character = player.Character
    if character and character:FindFirstChildOfClass("Humanoid") then
        character:FindFirstChildOfClass("Humanoid").JumpPower = value
    end
end)

createSlider(playerSection1, "重力设置", 0, 500, 196, function(value)
    workspace.Gravity = value
end)

local playerSection2 = createSection(playerPage, "状态控制")
local flyToggle = createToggle(playerSection2, "飞行模式", false, function(enabled)
    -- 飞行功能实现
    if enabled then
        -- 启用飞行
        local character = player.Character
        if character then
            local humanoid = character:FindFirstChildOfClass("Humanoid")
            local rootPart = character:FindFirstChild("HumanoidRootPart")
            
            if humanoid and rootPart then
                -- 创建飞行控制器
                local bodyVelocity = Instance.new("BodyVelocity")
                bodyVelocity.Velocity = Vector3.new(0, 0, 0)
                bodyVelocity.MaxForce = Vector3.new(4000, 4000, 4000)
                bodyVelocity.Parent = rootPart
                
                local bodyGyro = Instance.new("BodyGyro")
                bodyGyro.MaxTorque = Vector3.new(4000, 4000, 4000)
                bodyGyro.Parent = rootPart
                
                humanoid.PlatformStand = true
                
                -- 存储引用
                flyToggle.bodyVelocity = bodyVelocity
                flyToggle.bodyGyro = bodyGyro
                
                -- 飞行控制
                local flyConnection
                flyConnection = RunService.Heartbeat:Connect(function()
                    if not flyToggle.bodyVelocity then
                        flyConnection:Disconnect()
                        return
                    end
                    
                    local camera = workspace.CurrentCamera
                    local direction = Vector3.new(0, 0, 0)
                    
                    -- 键盘控制
                    if UserInputService:IsKeyDown(Enum.KeyCode.W) then
                        direction = direction + camera.CFrame.LookVector
                    end
                    if UserInputService:IsKeyDown(Enum.KeyCode.S) then
                        direction = direction - camera.CFrame.LookVector
                    end
                    if UserInputService:IsKeyDown(Enum.KeyCode.A) then
                        direction = direction - camera.CFrame.RightVector
                    end
                    if UserInputService:IsKeyDown(Enum.KeyCode.D) then
                        direction = direction + camera.CFrame.RightVector
                    end
                    if UserInputService:IsKeyDown(Enum.KeyCode.Space) then
                        direction = direction + Vector3.new(0, 1, 0)
                    end
                    if UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) then
                        direction = direction + Vector3.new(0, -1, 0)
                    end
                    
                    if direction.Magnitude > 0 then
                        bodyVelocity.Velocity = direction.Unit * 50
                    else
                        bodyVelocity.Velocity = Vector3.new(0, 0, 0)
                    end
                    
                    bodyGyro.CFrame = camera.CFrame
                end)
                
                flyToggle.connection = flyConnection
            end
        end
    else
        -- 禁用飞行
        if flyToggle.bodyVelocity then
            flyToggle.bodyVelocity:Destroy()
            flyToggle.bodyVelocity = nil
        end
        if flyToggle.bodyGyro then
            flyToggle.bodyGyro:Destroy()
            flyToggle.bodyGyro = nil
        end
        if flyToggle.connection then
            flyToggle.connection:Disconnect()
            flyToggle.connection = nil
        end
        
        local character = player.Character
        if character then
            local humanoid = character:FindFirstChildOfClass("Humanoid")
            if humanoid then
                humanoid.PlatformStand = false
            end
        end
    end
end)

local noclipToggle = createToggle(playerSection2, "穿墙模式", false, function(enabled)
    -- 穿墙功能实现
    if enabled then
        noclipToggle.connection = RunService.Stepped:Connect(function()
            if player.Character then
                for _, part in pairs(player.Character:GetDescendants()) do
                    if part:IsA("BasePart") then
                        part.CanCollide = false
                    end
                end
            end
        end)
    else
        if noclipToggle.connection then
            noclipToggle.connection:Disconnect()
            noclipToggle.connection = nil
        end
        
        if player.Character then
            for _, part in pairs(player.Character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CanCollide = true
                end
            end
        end
    end
end)

-- 👁️ 视觉功能页面
local visualSection1 = createSection(visualPage, "环境视觉")
local espToggle = createToggle(visualSection1, "玩家透视", false, function(enabled)
    -- ESP功能实现
    if enabled then
        local function createESP(targetPlayer)
            if targetPlayer == player then return end
            
            local character = targetPlayer.Character
            if not character then return end
            
            local highlight = Instance.new("Highlight")
            highlight.Name = "ESPHighlight"
            highlight.FillColor = Color3.fromRGB(255, 0, 0)
            highlight.FillTransparency = 0.7
            highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
            highlight.OutlineTransparency = 0
            highlight.Adornee = character
            highlight.Parent = character
        end
        
        -- 为现有玩家创建ESP
        for _, otherPlayer in pairs(Players:GetPlayers()) do
            if otherPlayer ~= player then
                createESP(otherPlayer)
                otherPlayer.CharacterAdded:Connect(function(character)
                    wait(1) -- 等待角色加载
                    createESP(otherPlayer)
                end)
            end
        end
        
        -- 为新玩家创建ESP
        espToggle.playerAdded = Players.PlayerAdded:Connect(function(newPlayer)
            newPlayer.CharacterAdded:Connect(function(character)
                wait(1)
                createESP(newPlayer)
            end)
        end)
    else
        -- 移除所有ESP
        for _, otherPlayer in pairs(Players:GetPlayers()) do
            if otherPlayer.Character then
                local highlight = otherPlayer.Character:FindFirstChild("ESPHighlight")
                if highlight then
                    highlight:Destroy()
                end
            end
        end
        
        if espToggle.playerAdded then
            espToggle.playerAdded:Disconnect()
            espToggle.playerAdded = nil
        end
    end
end)

local nightVisionToggle = createToggle(visualSection1, "夜视模式", false, function(enabled)
    if enabled then
        game.Lighting.Ambient = Color3.new(1, 1, 1)
        game.Lighting.Brightness = 2
    else
        game.Lighting.Ambient = Color3.new(0, 0, 0)
        game.Lighting.Brightness = 1
    end
end)

-- 🏃 移动功能页面
local movementSection1 = createSection(movementPage, "移动增强")
local infiniteJumpToggle = createToggle(movementSection1, "无限跳跃", false, function(enabled)
    if enabled then
        infiniteJumpToggle.connection = UserInputService.JumpRequest:Connect(function()
            if player.Character and player.Character:FindFirstChildOfClass("Humanoid") then
                player.Character:FindFirstChildOfClass("Humanoid"):ChangeState("Jumping")
            end
        end)
    else
        if infiniteJumpToggle.connection then
            infiniteJumpToggle.connection:Disconnect()
            infiniteJumpToggle.connection = nil
        end
    end
end)

createButton(movementSection1, "传送到出生点", function()
    if player.Character then
        player.Character:FindFirstChild("HumanoidRootPart").CFrame = CFrame.new(0, 10, 0)
    end
end)

-- 🔧 其他功能页面
local otherSection1 = createSection(otherPage, "工具功能")
createButton(otherSection1, "显示FPS", function()
    -- FPS显示功能
    local fpsGui = Instance.new("ScreenGui")
    fpsGui.Name = "FPSDisplay"
    fpsGui.Parent = playerGui
    
    local fpsLabel = Instance.new("TextLabel")
    fpsLabel.Size = UDim2.new(0, 100, 0, 30)
    fpsLabel.Position = UDim2.new(0, 10, 0, 50)
    fpsLabel.BackgroundTransparency = 0.5
    fpsLabel.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    fpsLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    fpsLabel.Text = "FPS: 0"
    fpsLabel.Parent = fpsGui
    
    local fps = 0
    local lastTime = tick()
    local frameCount = 0
    
    RunService.Heartbeat:Connect(function()
        frameCount = frameCount + 1
        local currentTime = tick()
        
        if currentTime - lastTime >= 1 then
            fps = frameCount
            frameCount = 0
            lastTime = currentTime
            fpsLabel.Text = "FPS: " .. fps
        end
    end)
end)

createButton(otherSection1, "玩家信息", function()
    -- 玩家信息显示
    local infoGui = Instance.new("ScreenGui")
    infoGui.Name = "PlayerInfo"
    infoGui.Parent = playerGui
    
    local infoFrame = Instance.new("Frame")
    infoFrame.Size = UDim2.new(0, 200, 0, 120)
    infoFrame.Position = UDim2.new(0, 10, 0, 90)
    infoFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    infoFrame.Parent = infoGui
    
    local infoCorner = Instance.new("UICorner")
    infoCorner.CornerRadius = UDim.new(0, 8)
    infoCorner.Parent = infoFrame
    
    local infoLabel = Instance.new("TextLabel")
    infoLabel.Size = UDim2.new(1, -10, 1, -10)
    infoLabel.Position = UDim2.new(0, 5, 0, 5)
    infoLabel.BackgroundTransparency = 1
    infoLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    infoLabel.TextSize = 12
    infoLabel.TextWrapped = true
    infoLabel.Font = Enum.Font.Gotham
    infoLabel.Parent = infoFrame
    
    local info = string.format(
        "用户名: %s\n账号年龄: %d天\n用户ID: %d\n游戏ID: %d",
        player.Name,
        player.AccountAge,
        player.UserId,
        game.PlaceId
    )
    infoLabel.Text = info
end)

-- 🎯 UI控制功能
-- 拖动功能
local dragging = false
local dragInput
local dragStart
local startPos

TitleBar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = MainContainer.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

TitleBar.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
        dragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        local delta = input.Position - dragStart
        MainContainer.Position = UDim2.new(
            startPos.X.Scale, 
            startPos.X.Offset + delta.X,
            startPos.Y.Scale, 
            startPos.Y.Offset + delta.Y
        )
    end
end)

-- 按钮功能
CloseBtn.MouseButton1Click:Connect(function()
    local tweenInfo = TweenInfo.new(0.3, Enum.EasingStyle.Back, Enum.EasingDirection.In)
    local tween = TweenService:Create(MainContainer, tweenInfo, {Size = UDim2.new(0, 0, 0, 0)})
    tween:Play()
    tween.Completed:Wait()
    MainUI:Destroy()
end)

MinimizeBtn.MouseButton1Click:Connect(function()
    if ContentArea.Visible then
        -- 最小化
        MainContainer.Size = UDim2.new(0, 350, 0, 35)
        ContentArea.Visible = false
        MinimizeBtn.Text = "+"
    else
        -- 恢复
        MainContainer.Size = UDim2.new(0, 350, 0, 400)
        ContentArea.Visible = true
        MinimizeBtn.Text = "_"
    end
end)

SettingsBtn.MouseButton1Click:Connect(function()
    -- 简单设置功能 - 切换主题
    local currentBg = MainContainer.BackgroundColor3
    if currentBg == Color3.fromRGB(40, 40, 40) then
        -- 切换到深色主题
        MainContainer.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
        ContentArea.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    else
        -- 切换回默认主题
        MainContainer.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
        ContentArea.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    end
end)

-- 按钮悬停效果
local function setupHoverEffects()
    local buttons = {CloseBtn, MinimizeBtn, SettingsBtn}
    
    for _, btn in pairs(buttons) do
        btn.MouseEnter:Connect(function()
            local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
            local tween = TweenService:Create(btn, tweenInfo, {Size = UDim2.new(0, 22, 0, 22)})
            tween:Play()
        end)
        
        btn.MouseLeave:Connect(function()
            local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
            local tween = TweenService:Create(btn, tweenInfo, {Size = UDim2.new(0, 20, 0, 20)})
            tween:Play()
        end)
    end
    
    TitleBar.MouseEnter:Connect(function()
        local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
        local tween = TweenService:Create(TitleBar, tweenInfo, {BackgroundColor3 = Color3.fromRGB(50, 164, 255)})
        tween:Play()
    end)
    
    TitleBar.MouseLeave:Connect(function()
        local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
        local tween = TweenService:Create(TitleBar, tweenInfo, {BackgroundColor3 = Color3.fromRGB(30, 144, 255)})
        tween:Play()
    end)
end

setupHoverEffects()

-- 调整页面大小
playerPage.CanvasSize = UDim2.new(0, 0, 0, 300)
visualPage.CanvasSize = UDim2.new(0, 0, 0, 200)
movementPage.CanvasSize = UDim2.new(0, 0, 0, 150)
otherPage.CanvasSize = UDim2.new(0, 0, 0, 200)

print("🎮 多功能脚本合集已加载！")
print("📝 功能包括: 飞行、穿墙、ESP、夜视、无限跳等")
print("🖱️  拖动标题栏移动UI")
print("⚙️  使用控制按钮管理窗口")